package com.mediQuick.medicineApp.service;

import java.util.List;
import java.util.Optional;
import java.util.stream.Collector;
import java.util.stream.Collectors;

import javax.transaction.Transactional;

import org.modelmapper.ModelMapper;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;

import com.mediQuick.medicineApp.dto.MedicineDto;
import com.mediQuick.medicineApp.entity.Medicines;
import com.mediQuick.medicineApp.repositories.MedicineRepositories;

@Service
@Transactional
public class MedicineServiceImpl implements MedicineService {

	
	@Autowired
	private MedicineRepositories medRepo;
	
	@Autowired
	private ModelMapper modelMap;
	

	@Override
	public List<MedicineDto> getAllMed() {
		return medRepo.findAll()
				.stream()
				.map(med ->
				modelMap.map(med, MedicineDto.class))
				.collect(Collectors.toList());
	}

	@Override
	public MedicineDto addMed(MedicineDto med) {
		return medRepo.save(med);
	}

	@Override
	public Optional<MedicineDto> getMed(Long medId) {
		return medRepo.findById(medId);
	}

//	@Override
//	public Medicines updateMed(Long medId) {
//		return medRepo.save();
//	}

	@Override
	public String delMed(Long medId) {
		 if(medRepo.existsById(medId)) {
			 medRepo.deleteById(medId);
			 return "Item deleted";
		 }
		 return "item not deleted as not found";
	}

	@Override
	public String updateMed(Long medId, MedicineDto med) {
		// TODO Auto-generated method stub
		return null;
	}

//	@Override
//	public String updateMed(Long medId, Medicines med) {
//		if(medRepo.existsById(medId)) {
//			medRepo.save(med);
//			return "updated";
//		}
//		return "not updated";	
//		}
//	
	

}
